<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpusFile: Opening and Closing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="opus_logo.svg"/></td>
  <td id="projectalign">
   <div id="projectname">OpusFile<span id="projectnumber">&#160;0.0</span>
   </div>
   <div id="projectbrief">Stand-alone decoder library for .opus files.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group__stream__open__close.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Opening and Closing </div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-member-group" class="groupheader"><a id="member-group" name="member-group"></a>
Functions for opening and closing streams</h2></td></tr>
<tr><td class="ititle" colspan="2"><p>These functions allow you to test a stream to see if it is Opus, open it, and close it.</p>
<p>Several flavors are provided for each of the built-in stream types, plus a more general version which takes a set of application-provided callbacks. </p>
</td></tr>
<tr class="memitem:ga54158ed1570a0062cb674115cd3699ab" id="r_ga54158ed1570a0062cb674115cd3699ab"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga54158ed1570a0062cb674115cd3699ab">op_test</a> (<a class="el" href="struct_opus_head.html">OpusHead</a> *_head, const unsigned char *_initial_data, size_t _initial_bytes)</td></tr>
<tr class="memdesc:ga54158ed1570a0062cb674115cd3699ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test to see if this is an Opus stream.  <br /></td></tr>
<tr class="memitem:ga7d3ff53baec9a5ee82a6d81f4ec4f48b" id="r_ga7d3ff53baec9a5ee82a6d81f4ec4f48b"><td class="memItemLeft" align="right" valign="top">OP_WARN_UNUSED_RESULT OggOpusFile *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7d3ff53baec9a5ee82a6d81f4ec4f48b">op_open_file</a> (const char *_path, int *_error) OP_ARG_NONNULL(1)</td></tr>
<tr class="memdesc:ga7d3ff53baec9a5ee82a6d81f4ec4f48b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a stream from the given file path.  <br /></td></tr>
<tr class="memitem:ga61be52df7fd31e7e0e80c475076cea19" id="r_ga61be52df7fd31e7e0e80c475076cea19"><td class="memItemLeft" align="right" valign="top">OP_WARN_UNUSED_RESULT OggOpusFile *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga61be52df7fd31e7e0e80c475076cea19">op_open_memory</a> (const unsigned char *_data, size_t _size, int *_error)</td></tr>
<tr class="memdesc:ga61be52df7fd31e7e0e80c475076cea19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a stream from a memory buffer.  <br /></td></tr>
<tr class="memitem:gab4844dd52e08152d9d5f09a63e6527c8" id="r_gab4844dd52e08152d9d5f09a63e6527c8"><td class="memItemLeft" align="right" valign="top">OP_WARN_UNUSED_RESULT OggOpusFile *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab4844dd52e08152d9d5f09a63e6527c8">op_vopen_url</a> (const char *_url, int *_error, va_list _ap) OP_ARG_NONNULL(1)</td></tr>
<tr class="memdesc:gab4844dd52e08152d9d5f09a63e6527c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a stream from a URL.  <br /></td></tr>
<tr class="memitem:ga8bce1fbd787ed1d0d0ea6df5f4a79f94" id="r_ga8bce1fbd787ed1d0d0ea6df5f4a79f94"><td class="memItemLeft" align="right" valign="top">OP_WARN_UNUSED_RESULT OggOpusFile *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8bce1fbd787ed1d0d0ea6df5f4a79f94">op_open_url</a> (const char *_url, int *_error,...) OP_ARG_NONNULL(1)</td></tr>
<tr class="memdesc:ga8bce1fbd787ed1d0d0ea6df5f4a79f94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a stream from a URL.  <br /></td></tr>
<tr class="memitem:ga56e2080a777545440013b176b23f061e" id="r_ga56e2080a777545440013b176b23f061e"><td class="memItemLeft" align="right" valign="top">OP_WARN_UNUSED_RESULT OggOpusFile *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga56e2080a777545440013b176b23f061e">op_open_callbacks</a> (void *_stream, const <a class="el" href="struct_opus_file_callbacks.html">OpusFileCallbacks</a> *_cb, const unsigned char *_initial_data, size_t _initial_bytes, int *_error) OP_ARG_NONNULL(2)</td></tr>
<tr class="memdesc:ga56e2080a777545440013b176b23f061e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a stream using the given set of callbacks to access it.  <br /></td></tr>
<tr class="memitem:ga2c273526577467b7551be432d84a4b3a" id="r_ga2c273526577467b7551be432d84a4b3a"><td class="memItemLeft" align="right" valign="top">OP_WARN_UNUSED_RESULT OggOpusFile *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga2c273526577467b7551be432d84a4b3a">op_test_file</a> (const char *_path, int *_error) OP_ARG_NONNULL(1)</td></tr>
<tr class="memdesc:ga2c273526577467b7551be432d84a4b3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partially open a stream from the given file path.  <br /></td></tr>
<tr class="memitem:gad9611dd24582943444afde5bf604862c" id="r_gad9611dd24582943444afde5bf604862c"><td class="memItemLeft" align="right" valign="top">OP_WARN_UNUSED_RESULT OggOpusFile *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad9611dd24582943444afde5bf604862c">op_test_memory</a> (const unsigned char *_data, size_t _size, int *_error)</td></tr>
<tr class="memdesc:gad9611dd24582943444afde5bf604862c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partially open a stream from a memory buffer.  <br /></td></tr>
<tr class="memitem:gaffe2d4588cb7c0b8812e3657405ff1d4" id="r_gaffe2d4588cb7c0b8812e3657405ff1d4"><td class="memItemLeft" align="right" valign="top">OP_WARN_UNUSED_RESULT OggOpusFile *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaffe2d4588cb7c0b8812e3657405ff1d4">op_vtest_url</a> (const char *_url, int *_error, va_list _ap) OP_ARG_NONNULL(1)</td></tr>
<tr class="memdesc:gaffe2d4588cb7c0b8812e3657405ff1d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partially open a stream from a URL.  <br /></td></tr>
<tr class="memitem:ga04519b866f65598560a42ac54f4f8d83" id="r_ga04519b866f65598560a42ac54f4f8d83"><td class="memItemLeft" align="right" valign="top">OP_WARN_UNUSED_RESULT OggOpusFile *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga04519b866f65598560a42ac54f4f8d83">op_test_url</a> (const char *_url, int *_error,...) OP_ARG_NONNULL(1)</td></tr>
<tr class="memdesc:ga04519b866f65598560a42ac54f4f8d83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partially open a stream from a URL.  <br /></td></tr>
<tr class="memitem:ga32d653f708925ae0f70965b66aef030c" id="r_ga32d653f708925ae0f70965b66aef030c"><td class="memItemLeft" align="right" valign="top">OP_WARN_UNUSED_RESULT OggOpusFile *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga32d653f708925ae0f70965b66aef030c">op_test_callbacks</a> (void *_stream, const <a class="el" href="struct_opus_file_callbacks.html">OpusFileCallbacks</a> *_cb, const unsigned char *_initial_data, size_t _initial_bytes, int *_error) OP_ARG_NONNULL(2)</td></tr>
<tr class="memdesc:ga32d653f708925ae0f70965b66aef030c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partially open a stream using the given set of callbacks to access it.  <br /></td></tr>
<tr class="memitem:ga7b7f1c778ce6ced5538ce66e292d894d" id="r_ga7b7f1c778ce6ced5538ce66e292d894d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7b7f1c778ce6ced5538ce66e292d894d">op_test_open</a> (OggOpusFile *_of) OP_ARG_NONNULL(1)</td></tr>
<tr class="memdesc:ga7b7f1c778ce6ced5538ce66e292d894d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finish opening a stream partially opened with <a class="el" href="#ga32d653f708925ae0f70965b66aef030c" title="Partially open a stream using the given set of callbacks to access it.">op_test_callbacks()</a> or one of the associated convenience functions.  <br /></td></tr>
<tr class="memitem:gaf494ef9aa761647d8167c49507560d1c" id="r_gaf494ef9aa761647d8167c49507560d1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf494ef9aa761647d8167c49507560d1c">op_free</a> (OggOpusFile *_of)</td></tr>
<tr class="memdesc:gaf494ef9aa761647d8167c49507560d1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release all memory used by an <code>OggOpusFile</code>.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="ga54158ed1570a0062cb674115cd3699ab" name="ga54158ed1570a0062cb674115cd3699ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga54158ed1570a0062cb674115cd3699ab">&#9670;&#160;</a></span>op_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int op_test </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_opus_head.html">OpusHead</a> *</td>          <td class="paramname"><span class="paramname"><em>_head</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *</td>          <td class="paramname"><span class="paramname"><em>_initial_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>_initial_bytes</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test to see if this is an Opus stream. </p>
<p>For good results, you will need at least 57 bytes (for a pure Opus-only stream). Something like 512 bytes will give more reliable results for multiplexed streams. This function is meant to be a quick-rejection filter. Its purpose is not to guarantee that a stream is a valid Opus stream, but to ensure that it looks enough like Opus that it isn't going to be recognized as some other format (except possibly an Opus stream that is also multiplexed with other codecs, such as video). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">_head</td><td>The parsed ID header contents. You may pass <code>NULL</code> if you do not need this information. If the function fails, the contents of this structure remain untouched. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_initial_data</td><td>An initial buffer of data from the start of the stream. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_initial_bytes</td><td>The number of bytes in <em class="arg">_initial_data</em>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the data appears to be Opus, or a negative value on error. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga4fd28e64a5cbe5e0ba163916199611a5" title="A request did not succeed.">OP_FALSE</a></td><td>There was not enough data to tell if this was an Opus stream or not. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga2ddb887c0bb55c74ea6be391fabcba59" title="A NULL pointer was passed where one was unexpected, or an internal memory allocation failed,...">OP_EFAULT</a></td><td>An internal memory allocation failed. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaeea27378f826033ca23584d8403665d3" title="The stream used a feature that is not implemented, such as an unsupported channel family.">OP_EIMPL</a></td><td>The stream used a feature that is not implemented, such as an unsupported channel family. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gafca3ae244d24e10b2851c77379453220" title="A purported Ogg Opus stream did not begin with an Ogg page, a purported header packet did not start w...">OP_ENOTFORMAT</a></td><td>If the data did not contain a recognizable ID header for an Opus stream. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaa9ae4494f623f3c0609f0b4bd99b8f32" title="The ID header contained an unrecognized version number.">OP_EVERSION</a></td><td>If the version field signaled a version this library does not know how to parse. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga534f1b45c8733a2928434e482b38869f" title="A required header packet was not properly formatted, contained illegal values, or was missing altoget...">OP_EBADHEADER</a></td><td>The ID header was not properly formatted or contained illegal values. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga7d3ff53baec9a5ee82a6d81f4ec4f48b" name="ga7d3ff53baec9a5ee82a6d81f4ec4f48b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7d3ff53baec9a5ee82a6d81f4ec4f48b">&#9670;&#160;</a></span>op_open_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OP_WARN_UNUSED_RESULT OggOpusFile * op_open_file </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>_error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a stream from the given file path. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">_path</td><td>The path to the file to open. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_error</td><td>Returns 0 on success, or a failure code on error. You may pass in <code>NULL</code> if you don't want the failure code. The failure code will be <a class="el" href="group__error__codes.html#ga2ddb887c0bb55c74ea6be391fabcba59" title="A NULL pointer was passed where one was unexpected, or an internal memory allocation failed,...">OP_EFAULT</a> if the file could not be opened, or one of the other failure codes from <a class="el" href="#ga56e2080a777545440013b176b23f061e" title="Open a stream using the given set of callbacks to access it.">op_open_callbacks()</a> otherwise. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A freshly opened <code>OggOpusFile</code>, or <code>NULL</code> on error. </dd></dl>

</div>
</div>
<a id="ga61be52df7fd31e7e0e80c475076cea19" name="ga61be52df7fd31e7e0e80c475076cea19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga61be52df7fd31e7e0e80c475076cea19">&#9670;&#160;</a></span>op_open_memory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OP_WARN_UNUSED_RESULT OggOpusFile * op_open_memory </td>
          <td>(</td>
          <td class="paramtype">const unsigned char *</td>          <td class="paramname"><span class="paramname"><em>_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>_size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>_error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a stream from a memory buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">_data</td><td>The memory buffer to open. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_size</td><td>The number of bytes in the buffer. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_error</td><td>Returns 0 on success, or a failure code on error. You may pass in <code>NULL</code> if you don't want the failure code. See <a class="el" href="#ga56e2080a777545440013b176b23f061e" title="Open a stream using the given set of callbacks to access it.">op_open_callbacks()</a> for a full list of failure codes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A freshly opened <code>OggOpusFile</code>, or <code>NULL</code> on error. </dd></dl>

</div>
</div>
<a id="gab4844dd52e08152d9d5f09a63e6527c8" name="gab4844dd52e08152d9d5f09a63e6527c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab4844dd52e08152d9d5f09a63e6527c8">&#9670;&#160;</a></span>op_vopen_url()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OP_WARN_UNUSED_RESULT OggOpusFile * op_vopen_url </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>_url</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>_error</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list</td>          <td class="paramname"><span class="paramname"><em>_ap</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a stream from a URL. </p>
<p>This function behaves identically to <a class="el" href="#ga8bce1fbd787ed1d0d0ea6df5f4a79f94" title="Open a stream from a URL.">op_open_url()</a>, except that it takes a va_list instead of a variable number of arguments. It does not call the <code>va_end</code> macro, and because it invokes the <code>va_arg</code> macro, the value of <em class="arg">_ap</em> is undefined after the call. </p><dl class="section note"><dt>Note</dt><dd>If you use this function, you must link against <span class="tt">libopusurl</span>. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">_url</td><td>The URL to open. Currently only the &lt;file:&gt;, &lt;http:&gt;, and &lt;https:&gt; schemes are supported. Both &lt;http:&gt; and &lt;https:&gt; may be disabled at compile time, in which case opening such URLs will always fail. Currently this only supports URIs. IRIs should be converted to UTF-8 and URL-escaped, with internationalized domain names encoded in punycode, before passing them to this function. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_error</td><td>Returns 0 on success, or a failure code on error. You may pass in <code>NULL</code> if you don't want the failure code. See <a class="el" href="#ga56e2080a777545440013b176b23f061e" title="Open a stream using the given set of callbacks to access it.">op_open_callbacks()</a> for a full list of failure codes. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">_ap</td><td>A list of the <a class="el" href="group__url__options.html">optional flags</a> to use. This is a variable-length list of options terminated with <code>NULL</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A freshly opened <code>OggOpusFile</code>, or <code>NULL</code> on error. </dd></dl>

</div>
</div>
<a id="ga8bce1fbd787ed1d0d0ea6df5f4a79f94" name="ga8bce1fbd787ed1d0d0ea6df5f4a79f94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8bce1fbd787ed1d0d0ea6df5f4a79f94">&#9670;&#160;</a></span>op_open_url()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OP_WARN_UNUSED_RESULT OggOpusFile * op_open_url </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>_url</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>_error</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>...</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a stream from a URL. </p>
<dl class="section note"><dt>Note</dt><dd>If you use this function, you must link against <span class="tt">libopusurl</span>. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">_url</td><td>The URL to open. Currently only the &lt;file:&gt;, &lt;http:&gt;, and &lt;https:&gt; schemes are supported. Both &lt;http:&gt; and &lt;https:&gt; may be disabled at compile time, in which case opening such URLs will always fail. Currently this only supports URIs. IRIs should be converted to UTF-8 and URL-escaped, with internationalized domain names encoded in punycode, before passing them to this function. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_error</td><td>Returns 0 on success, or a failure code on error. You may pass in <code>NULL</code> if you don't want the failure code. See <a class="el" href="#ga56e2080a777545440013b176b23f061e" title="Open a stream using the given set of callbacks to access it.">op_open_callbacks()</a> for a full list of failure codes. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">...</td><td>The <a class="el" href="group__url__options.html">optional flags</a> to use. This is a variable-length list of options terminated with <code>NULL</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A freshly opened <code>OggOpusFile</code>, or <code>NULL</code> on error. </dd></dl>

</div>
</div>
<a id="ga56e2080a777545440013b176b23f061e" name="ga56e2080a777545440013b176b23f061e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga56e2080a777545440013b176b23f061e">&#9670;&#160;</a></span>op_open_callbacks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OP_WARN_UNUSED_RESULT OggOpusFile * op_open_callbacks </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>_stream</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_opus_file_callbacks.html">OpusFileCallbacks</a> *</td>          <td class="paramname"><span class="paramname"><em>_cb</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *</td>          <td class="paramname"><span class="paramname"><em>_initial_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>_initial_bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>_error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a stream using the given set of callbacks to access it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">_stream</td><td>The stream to read from (e.g., a <code>FILE *</code>). This value will be passed verbatim as the first argument to all of the callbacks. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_cb</td><td>The callbacks with which to access the stream. <a class="el" href="group__stream__callbacks.html#ga9ffca429db1f3b77f2f303f1942188c3">read()</a> must be implemented. <a class="el" href="group__stream__callbacks.html#gae57cb396d1f193d3f4e7e56ddad7760e">seek()</a> and <a class="el" href="group__stream__callbacks.html#gaca012812dea4bc3a27b0c23575efecaf">tell()</a> may be <code>NULL</code>, or may always return -1 to indicate a stream is unseekable, but if <a class="el" href="group__stream__callbacks.html#gae57cb396d1f193d3f4e7e56ddad7760e">seek()</a> is implemented and succeeds on a particular stream, then <a class="el" href="group__stream__callbacks.html#gaca012812dea4bc3a27b0c23575efecaf">tell()</a> must also. <a class="el" href="group__stream__callbacks.html#ga16c914ec90d301f125cdbeaa1ff57c2d">close()</a> may be <code>NULL</code>, but if it is not, it will be called when the <code>OggOpusFile</code> is destroyed by <a class="el" href="#gaf494ef9aa761647d8167c49507560d1c" title="Release all memory used by an OggOpusFile.">op_free()</a>. It will not be called if <a class="el" href="#ga56e2080a777545440013b176b23f061e" title="Open a stream using the given set of callbacks to access it.">op_open_callbacks()</a> fails with an error. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_initial_data</td><td>An initial buffer of data from the start of the stream. Applications can read some number of bytes from the start of the stream to help identify this as an Opus stream, and then provide them here to allow the stream to be opened, even if it is unseekable. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_initial_bytes</td><td>The number of bytes in <em class="arg">_initial_data</em>. If the stream is seekable, its current position (as reported by <a class="el" href="group__stream__callbacks.html#gaca012812dea4bc3a27b0c23575efecaf">tell()</a> at the start of this function) must be equal to <em class="arg">_initial_bytes</em>. Otherwise, seeking to absolute positions will generate inconsistent results. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_error</td><td>Returns 0 on success, or a failure code on error. You may pass in <code>NULL</code> if you don't want the failure code. The failure code will be one of <dl>
<dt><a class="el" href="group__error__codes.html#ga3ad48a4f99b1bed72acec552296dfc08" title="An underlying read, seek, or tell operation failed when it should have succeeded.">OP_EREAD</a> </dt>
<dd>An underlying read, seek, or tell operation failed when it should have succeeded, or we failed to find data in the stream we had seen before. </dd>
<dt><a class="el" href="group__error__codes.html#ga2ddb887c0bb55c74ea6be391fabcba59" title="A NULL pointer was passed where one was unexpected, or an internal memory allocation failed,...">OP_EFAULT</a> </dt>
<dd>There was a memory allocation failure, or an internal library error. </dd>
<dt><a class="el" href="group__error__codes.html#gaeea27378f826033ca23584d8403665d3" title="The stream used a feature that is not implemented, such as an unsupported channel family.">OP_EIMPL</a> </dt>
<dd>The stream used a feature that is not implemented, such as an unsupported channel family. </dd>
<dt><a class="el" href="group__error__codes.html#gae0879acafe9cc0ab72462d291fdb6fb6" title="One or more parameters to a function were invalid.">OP_EINVAL</a> </dt>
<dd><a class="el" href="group__stream__callbacks.html#gae57cb396d1f193d3f4e7e56ddad7760e">seek()</a> was implemented and succeeded on this source, but <a class="el" href="group__stream__callbacks.html#gaca012812dea4bc3a27b0c23575efecaf">tell()</a> did not, or the starting position indicator was not equal to <em class="arg">_initial_bytes</em>. </dd>
<dt><a class="el" href="group__error__codes.html#gafca3ae244d24e10b2851c77379453220" title="A purported Ogg Opus stream did not begin with an Ogg page, a purported header packet did not start w...">OP_ENOTFORMAT</a> </dt>
<dd>The stream contained a link that did not have any logical Opus streams in it. </dd>
<dt><a class="el" href="group__error__codes.html#ga534f1b45c8733a2928434e482b38869f" title="A required header packet was not properly formatted, contained illegal values, or was missing altoget...">OP_EBADHEADER</a> </dt>
<dd>A required header packet was not properly formatted, contained illegal values, or was missing altogether. </dd>
<dt><a class="el" href="group__error__codes.html#gaa9ae4494f623f3c0609f0b4bd99b8f32" title="The ID header contained an unrecognized version number.">OP_EVERSION</a> </dt>
<dd>An ID header contained an unrecognized version number. </dd>
<dt><a class="el" href="group__error__codes.html#gaf7b58a439a471366e9eb5b8f2a8cd041" title="We failed to find data we had seen before, or the bitstream structure was sufficiently malformed that...">OP_EBADLINK</a> </dt>
<dd>We failed to find data we had seen before after seeking. </dd>
<dt><a class="el" href="group__error__codes.html#gaf82657fc888f1dcf2e0d8f066b8a6cc7" title="The first or last granule position of a link failed basic validity checks.">OP_EBADTIMESTAMP</a> </dt>
<dd>The first or last timestamp in a link failed basic validity checks. </dd>
</dl>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A freshly opened <code>OggOpusFile</code>, or <code>NULL</code> on error. <span class="tt">libopusfile</span> does <em>not</em> take ownership of the stream if the call fails. The calling application is responsible for closing the stream if this call returns an error. </dd></dl>

</div>
</div>
<a id="ga2c273526577467b7551be432d84a4b3a" name="ga2c273526577467b7551be432d84a4b3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2c273526577467b7551be432d84a4b3a">&#9670;&#160;</a></span>op_test_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OP_WARN_UNUSED_RESULT OggOpusFile * op_test_file </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>_error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Partially open a stream from the given file path. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#ga32d653f708925ae0f70965b66aef030c" title="Partially open a stream using the given set of callbacks to access it.">op_test_callbacks</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">_path</td><td>The path to the file to open. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_error</td><td>Returns 0 on success, or a failure code on error. You may pass in <code>NULL</code> if you don't want the failure code. The failure code will be <a class="el" href="group__error__codes.html#ga2ddb887c0bb55c74ea6be391fabcba59" title="A NULL pointer was passed where one was unexpected, or an internal memory allocation failed,...">OP_EFAULT</a> if the file could not be opened, or one of the other failure codes from <a class="el" href="#ga56e2080a777545440013b176b23f061e" title="Open a stream using the given set of callbacks to access it.">op_open_callbacks()</a> otherwise. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A partially opened <code>OggOpusFile</code>, or <code>NULL</code> on error. </dd></dl>

</div>
</div>
<a id="gad9611dd24582943444afde5bf604862c" name="gad9611dd24582943444afde5bf604862c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad9611dd24582943444afde5bf604862c">&#9670;&#160;</a></span>op_test_memory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OP_WARN_UNUSED_RESULT OggOpusFile * op_test_memory </td>
          <td>(</td>
          <td class="paramtype">const unsigned char *</td>          <td class="paramname"><span class="paramname"><em>_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>_size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>_error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Partially open a stream from a memory buffer. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#ga32d653f708925ae0f70965b66aef030c" title="Partially open a stream using the given set of callbacks to access it.">op_test_callbacks</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">_data</td><td>The memory buffer to open. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_size</td><td>The number of bytes in the buffer. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_error</td><td>Returns 0 on success, or a failure code on error. You may pass in <code>NULL</code> if you don't want the failure code. See <a class="el" href="#ga56e2080a777545440013b176b23f061e" title="Open a stream using the given set of callbacks to access it.">op_open_callbacks()</a> for a full list of failure codes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A partially opened <code>OggOpusFile</code>, or <code>NULL</code> on error. </dd></dl>

</div>
</div>
<a id="gaffe2d4588cb7c0b8812e3657405ff1d4" name="gaffe2d4588cb7c0b8812e3657405ff1d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaffe2d4588cb7c0b8812e3657405ff1d4">&#9670;&#160;</a></span>op_vtest_url()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OP_WARN_UNUSED_RESULT OggOpusFile * op_vtest_url </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>_url</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>_error</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list</td>          <td class="paramname"><span class="paramname"><em>_ap</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Partially open a stream from a URL. </p>
<p>This function behaves identically to <a class="el" href="#ga04519b866f65598560a42ac54f4f8d83" title="Partially open a stream from a URL.">op_test_url()</a>, except that it takes a va_list instead of a variable number of arguments. It does not call the <code>va_end</code> macro, and because it invokes the <code>va_arg</code> macro, the value of <em class="arg">_ap</em> is undefined after the call. </p><dl class="section note"><dt>Note</dt><dd>If you use this function, you must link against <span class="tt">libopusurl</span>. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#ga04519b866f65598560a42ac54f4f8d83" title="Partially open a stream from a URL.">op_test_url</a> </dd>
<dd>
<a class="el" href="#ga32d653f708925ae0f70965b66aef030c" title="Partially open a stream using the given set of callbacks to access it.">op_test_callbacks</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">_url</td><td>The URL to open. Currently only the &lt;file:&gt;, &lt;http:&gt;, and &lt;https:&gt; schemes are supported. Both &lt;http:&gt; and &lt;https:&gt; may be disabled at compile time, in which case opening such URLs will always fail. Currently this only supports URIs. IRIs should be converted to UTF-8 and URL-escaped, with internationalized domain names encoded in punycode, before passing them to this function. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_error</td><td>Returns 0 on success, or a failure code on error. You may pass in <code>NULL</code> if you don't want the failure code. See <a class="el" href="#ga56e2080a777545440013b176b23f061e" title="Open a stream using the given set of callbacks to access it.">op_open_callbacks()</a> for a full list of failure codes. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">_ap</td><td>A list of the <a class="el" href="group__url__options.html">optional flags</a> to use. This is a variable-length list of options terminated with <code>NULL</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A partially opened <code>OggOpusFile</code>, or <code>NULL</code> on error. </dd></dl>

</div>
</div>
<a id="ga04519b866f65598560a42ac54f4f8d83" name="ga04519b866f65598560a42ac54f4f8d83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga04519b866f65598560a42ac54f4f8d83">&#9670;&#160;</a></span>op_test_url()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OP_WARN_UNUSED_RESULT OggOpusFile * op_test_url </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>_url</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>_error</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>...</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Partially open a stream from a URL. </p>
<dl class="section note"><dt>Note</dt><dd>If you use this function, you must link against <span class="tt">libopusurl</span>. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#ga32d653f708925ae0f70965b66aef030c" title="Partially open a stream using the given set of callbacks to access it.">op_test_callbacks</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">_url</td><td>The URL to open. Currently only the &lt;file:&gt;, &lt;http:&gt;, and &lt;https:&gt; schemes are supported. Both &lt;http:&gt; and &lt;https:&gt; may be disabled at compile time, in which case opening such URLs will always fail. Currently this only supports URIs. IRIs should be converted to UTF-8 and URL-escaped, with internationalized domain names encoded in punycode, before passing them to this function. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_error</td><td>Returns 0 on success, or a failure code on error. You may pass in <code>NULL</code> if you don't want the failure code. See <a class="el" href="#ga56e2080a777545440013b176b23f061e" title="Open a stream using the given set of callbacks to access it.">op_open_callbacks()</a> for a full list of failure codes. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">...</td><td>The <a class="el" href="group__url__options.html">optional flags</a> to use. This is a variable-length list of options terminated with <code>NULL</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A partially opened <code>OggOpusFile</code>, or <code>NULL</code> on error. </dd></dl>

</div>
</div>
<a id="ga32d653f708925ae0f70965b66aef030c" name="ga32d653f708925ae0f70965b66aef030c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga32d653f708925ae0f70965b66aef030c">&#9670;&#160;</a></span>op_test_callbacks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OP_WARN_UNUSED_RESULT OggOpusFile * op_test_callbacks </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>_stream</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_opus_file_callbacks.html">OpusFileCallbacks</a> *</td>          <td class="paramname"><span class="paramname"><em>_cb</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *</td>          <td class="paramname"><span class="paramname"><em>_initial_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>_initial_bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>_error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Partially open a stream using the given set of callbacks to access it. </p>
<p>This tests for Opusness and loads the headers for the first link. It does not seek (although it tests for seekability). You can query a partially open stream for the few pieces of basic information returned by <a class="el" href="group__stream__info.html#ga41992ce6f066e07609e5fe2ccd961f40" title="Get the serial number of the given link in a (possibly-chained) Ogg Opus stream.">op_serialno()</a>, <a class="el" href="group__stream__info.html#ga42c829e67c0ce8359bfbfc31a45c04f4" title="Get the channel count of the given link in a (possibly-chained) Ogg Opus stream.">op_channel_count()</a>, <a class="el" href="group__stream__info.html#gacc618acf40e3aec208639c3c9197347a" title="Get the ID header information for the given link in a (possibly chained) Ogg Opus stream.">op_head()</a>, and <a class="el" href="group__stream__info.html#gab1e3ee44533ba4af247ddee0cbc6759b" title="Get the comment header information for the given link in a (possibly chained) Ogg Opus stream.">op_tags()</a> (but only for the first link). You may also determine if it is seekable via a call to <a class="el" href="group__stream__info.html#ga9272a4a6ac9e01fbc549008f5ff58b4c" title="Returns whether or not the stream being read is seekable.">op_seekable()</a>. You cannot read audio from the stream, seek, get the size or duration, get information from links other than the first one, or even get the total number of links until you finish opening the stream with <a class="el" href="#ga7b7f1c778ce6ced5538ce66e292d894d" title="Finish opening a stream partially opened with op_test_callbacks() or one of the associated convenienc...">op_test_open()</a>. If you do not need to do any of these things, you can dispose of it with <a class="el" href="#gaf494ef9aa761647d8167c49507560d1c" title="Release all memory used by an OggOpusFile.">op_free()</a> instead.</p>
<p>This function is provided mostly to simplify porting existing code that used <span class="tt">libvorbisfile</span>. For new code, you are likely better off using <a class="el" href="#ga54158ed1570a0062cb674115cd3699ab" title="Test to see if this is an Opus stream.">op_test()</a> instead, which is less resource-intensive, requires less data to succeed, and imposes a hard limit on the amount of data it examines (important for unseekable streams, where all such data must be buffered until you are sure of the stream type). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">_stream</td><td>The stream to read from (e.g., a <code>FILE *</code>). This value will be passed verbatim as the first argument to all of the callbacks. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_cb</td><td>The callbacks with which to access the stream. <a class="el" href="group__stream__callbacks.html#ga9ffca429db1f3b77f2f303f1942188c3">read()</a> must be implemented. <a class="el" href="group__stream__callbacks.html#gae57cb396d1f193d3f4e7e56ddad7760e">seek()</a> and <a class="el" href="group__stream__callbacks.html#gaca012812dea4bc3a27b0c23575efecaf">tell()</a> may be <code>NULL</code>, or may always return -1 to indicate a stream is unseekable, but if <a class="el" href="group__stream__callbacks.html#gae57cb396d1f193d3f4e7e56ddad7760e">seek()</a> is implemented and succeeds on a particular stream, then <a class="el" href="group__stream__callbacks.html#gaca012812dea4bc3a27b0c23575efecaf">tell()</a> must also. <a class="el" href="group__stream__callbacks.html#ga16c914ec90d301f125cdbeaa1ff57c2d">close()</a> may be <code>NULL</code>, but if it is not, it will be called when the <code>OggOpusFile</code> is destroyed by <a class="el" href="#gaf494ef9aa761647d8167c49507560d1c" title="Release all memory used by an OggOpusFile.">op_free()</a>. It will not be called if <a class="el" href="#ga56e2080a777545440013b176b23f061e" title="Open a stream using the given set of callbacks to access it.">op_open_callbacks()</a> fails with an error. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_initial_data</td><td>An initial buffer of data from the start of the stream. Applications can read some number of bytes from the start of the stream to help identify this as an Opus stream, and then provide them here to allow the stream to be tested more thoroughly, even if it is unseekable. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_initial_bytes</td><td>The number of bytes in <em class="arg">_initial_data</em>. If the stream is seekable, its current position (as reported by <a class="el" href="group__stream__callbacks.html#gaca012812dea4bc3a27b0c23575efecaf">tell()</a> at the start of this function) must be equal to <em class="arg">_initial_bytes</em>. Otherwise, seeking to absolute positions will generate inconsistent results. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_error</td><td>Returns 0 on success, or a failure code on error. You may pass in <code>NULL</code> if you don't want the failure code. See <a class="el" href="#ga56e2080a777545440013b176b23f061e" title="Open a stream using the given set of callbacks to access it.">op_open_callbacks()</a> for a full list of failure codes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A partially opened <code>OggOpusFile</code>, or <code>NULL</code> on error. <span class="tt">libopusfile</span> does <em>not</em> take ownership of the stream if the call fails. The calling application is responsible for closing the stream if this call returns an error. </dd></dl>

</div>
</div>
<a id="ga7b7f1c778ce6ced5538ce66e292d894d" name="ga7b7f1c778ce6ced5538ce66e292d894d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7b7f1c778ce6ced5538ce66e292d894d">&#9670;&#160;</a></span>op_test_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int op_test_open </td>
          <td>(</td>
          <td class="paramtype">OggOpusFile *</td>          <td class="paramname"><span class="paramname"><em>_of</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finish opening a stream partially opened with <a class="el" href="#ga32d653f708925ae0f70965b66aef030c" title="Partially open a stream using the given set of callbacks to access it.">op_test_callbacks()</a> or one of the associated convenience functions. </p>
<p>If this function fails, you are still responsible for freeing the <code>OggOpusFile</code> with <a class="el" href="#gaf494ef9aa761647d8167c49507560d1c" title="Release all memory used by an OggOpusFile.">op_free()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_of</td><td>The <code>OggOpusFile</code> to finish opening. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, or a negative value on error. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga3ad48a4f99b1bed72acec552296dfc08" title="An underlying read, seek, or tell operation failed when it should have succeeded.">OP_EREAD</a></td><td>An underlying read, seek, or tell operation failed when it should have succeeded. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga2ddb887c0bb55c74ea6be391fabcba59" title="A NULL pointer was passed where one was unexpected, or an internal memory allocation failed,...">OP_EFAULT</a></td><td>There was a memory allocation failure, or an internal library error. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaeea27378f826033ca23584d8403665d3" title="The stream used a feature that is not implemented, such as an unsupported channel family.">OP_EIMPL</a></td><td>The stream used a feature that is not implemented, such as an unsupported channel family. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gae0879acafe9cc0ab72462d291fdb6fb6" title="One or more parameters to a function were invalid.">OP_EINVAL</a></td><td>The stream was not partially opened with <a class="el" href="#ga32d653f708925ae0f70965b66aef030c" title="Partially open a stream using the given set of callbacks to access it.">op_test_callbacks()</a> or one of the associated convenience functions. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gafca3ae244d24e10b2851c77379453220" title="A purported Ogg Opus stream did not begin with an Ogg page, a purported header packet did not start w...">OP_ENOTFORMAT</a></td><td>The stream contained a link that did not have any logical Opus streams in it. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga534f1b45c8733a2928434e482b38869f" title="A required header packet was not properly formatted, contained illegal values, or was missing altoget...">OP_EBADHEADER</a></td><td>A required header packet was not properly formatted, contained illegal values, or was missing altogether. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaa9ae4494f623f3c0609f0b4bd99b8f32" title="The ID header contained an unrecognized version number.">OP_EVERSION</a></td><td>An ID header contained an unrecognized version number. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaf7b58a439a471366e9eb5b8f2a8cd041" title="We failed to find data we had seen before, or the bitstream structure was sufficiently malformed that...">OP_EBADLINK</a></td><td>We failed to find data we had seen before after seeking. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaf82657fc888f1dcf2e0d8f066b8a6cc7" title="The first or last granule position of a link failed basic validity checks.">OP_EBADTIMESTAMP</a></td><td>The first or last timestamp in a link failed basic validity checks. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaf494ef9aa761647d8167c49507560d1c" name="gaf494ef9aa761647d8167c49507560d1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf494ef9aa761647d8167c49507560d1c">&#9670;&#160;</a></span>op_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void op_free </td>
          <td>(</td>
          <td class="paramtype">OggOpusFile *</td>          <td class="paramname"><span class="paramname"><em>_of</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release all memory used by an <code>OggOpusFile</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_of</td><td>The <code>OggOpusFile</code> to free. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
